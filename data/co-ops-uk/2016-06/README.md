# Generating and deploying LOD

This directory contains tools for generating and deploying Linked Open Data (LOD) based on the 2016 Co-ops UK open dataset.

## Overview

The important files are:

| File | Description |
| ---- | ----------- |
| `co-operativeeconomy_opendataextract2016` | Directory of CSV files from Co-ops UK 2016 open dataset. |
| `Makefile` | Controls all aspects of the process of generating and deploying the LOD. |
| `generate-triples.rb` | Reads the CSV (Co-ops UK open dataset), and generates LOD, HTML, and more ... |
| `postcode_lat_lng.json` | Cache of latitude and longiture of postcodes. |
| `css` | Directory of CSS to be used with HTML generated by `generate-triples.rb`. |

## Usage

The `Makefile` drives everything. It contains help text. At the time of writing, this produces:

```
bombyx:~/ISE/p6data-coop/ise-linked-open-data/data/co-ops-uk/2016-06$ make
USAGE
-----
make help
	Prints help.
make help edition=x
	Prints help about a edition.
	Valid editions are: {final test}
make generate edition=x
	Generates RDF/XML and turtle data from the Co-ops UK files:
	    co-operativeeconomy_opendataextract2016/2016open_data_organisations.csv
	    co-operativeeconomy_opendataextract2016/2016open_data_outlets.csv
make deploy edition=x
	Deploys the generated data to the data server parecco
	WARNING: This replaces the directory on the server (i.e. files on the server may be deleted).
make triplestore edition=x
	Install deployed data into the triple store.
make sparqltest edition=x
	Runs some sparql queries, and by doing so documents some things.
```
## Editions
The Makefile can operate on different *editions* of Linked Open Data. For example, there may be an edition called `test` which generates data for test purposes.
The edition is specified as a command line argument to `make`. For example, to print the help message for the edition cxalled `test`:

```
bombyx:~/ISE/p6data-coop/ise-linked-open-data/data/co-ops-uk/2016-06$ make help edition=test
USAGE
-----
make help
	Prints help.
make help edition=x
	Prints help about a edition.
	Valid editions are: {final test}
make generate edition=x
	Generates RDF/XML and turtle data from the Co-ops UK files:
	    co-operativeeconomy_opendataextract2016/2016open_data_organisations.csv
	    co-operativeeconomy_opendataextract2016/2016open_data_outlets.csv
	Results are stored in the local directory generated-data/test/experimental/test/.
make deploy edition=x
	Deploys the generated data to the data server parecco
	Local directory generated-data/test/experimental/test/ is copied to public_html/subdomains/solidarityeconomics.org/data/doc/experimental/test/.
	After deployment (assuming content negotiation is configured properly) data can be accessed at this URI:
		http://data.solidarityeconomics.org/id/experimental/test/co-ops-uk
	WARNING: This replaces the directory on the server (i.e. files on the server may be deleted).
make triplestore edition=x
	Install deployed data into the triple store.
make sparqltest edition=x
	Runs some sparql queries, and by doing so documents some things.
```
